<html>
  <body>
    <input type="text" id="name" placeholder="You Name" value="" />
    <input type="text" id="phoneNo" placeholder="Phone Number" value="" />
    <input type="text" id="password" placeholder="Password" value="" /><br><br>
    <button id="sub" onclick="submit()">Submit</button>
    <p id="thnx"></p>
  </body>
  <script src="data.js" type="text/javascript"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
  
    var usersDataLS = localStorage.getItem("users_data_LS");
    users = JSON.parse(usersDataLS);
    var userId = localStorage.getItem("us_id_num");
    
    var nam = document.getElementById("name");
    var phoneNo = document.getElementById("phoneNo");
    var pass = document.getElementById("password");
   
    var jsonData;
  
const fs = require("fs"); 

  
// Storing the JSON format data in myObject 

 jsonData = fs.readFileSync("users_data.json"); 

var json_data_get = JSON.parse(jsonData); 





    function submit() {
      
      userId = Number(userId) + Number(1);
      localStorage.setItem("us_id_num", userId);
      
      var n = nam.value;
      var pn = phoneNo.value;
      var p = pass.value;
      
      if(n === "" || pn === "" || p === "") {
        thnx.innerHTML = "Please Enter Valid Input!"
      }
      else {
       
      
      /*Object.defineProperty(users, n, {
        value: {
          "username": n,
          "phoneNumber": pn,
          "password": p
        },
        writable: true
      });*/
     users[userId] = {
        "userId": userId,
        "username": n,
        "phoneNumber": pn,
        "password": p
     }
     
     
     //try 
     
     $.getJSON("/test.json", function(data){
            data = users;
        });
     
    var newData2 = JSON.stringify(users); 

fs.writeFile("users_data.json", newData2, (err) => { 

  // Error checking 

  if (err) throw err; 

  console.log(""); 
});


     
 
    localStorage.setItem("users_data_LS", JSON.stringify(users));
 
      thnx.innerHTML = "Thanks for Submitting!";
      setTimeout(function() {
        thnx.innerHTML = "";
        nam.value = "";
        phoneNo.value = "";
        pass.value = "";
      }, 2000);
}
    }
    
   // edit

    // Requiring fs module 
    
  </script>
</html>
